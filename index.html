<!DOCTYPE html>
<html lang="vi">
  <head>
    <base target="_top">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Hệ thống Quản lý Rừng FSC</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/dataTables.bootstrap5.min.css">
    <?!= include('style'); ?>
  </head>
  <body style="font-family: 'Be Vietnam Pro', sans-serif; background-color: #F8F9FA;">
    
    <div id="login-screen" class="vh-100 d-flex align-items-center justify-content-center">
      <div class="login-card p-5 text-center bg-white shadow rounded-4" style="max-width: 400px; width: 100%;">
        <img src="https://github.com/impactslowforest/Logo/blob/main/FSC%20logo%20-%20R.png?raw=true" height="80" class="mb-4 logo-bounce">
        <h5 class="fw-bold text-success mb-4">QUẢN LÝ RỪNG BỀN VỮNG</h5>
        
        <form id="form-login">
          <input type="email" class="form-control mb-3" id="login-email" placeholder="Email" required>
          <input type="password" class="form-control mb-2" id="login-pass" placeholder="Mật khẩu" required>
          <div class="d-flex justify-content-between mb-4">
             <a href="javascript:void(0)" class="text-decoration-none small text-success fw-bold" onclick="toggleAuth('REGISTER')">Đăng ký mới</a>
             <a href="javascript:void(0)" class="text-decoration-none small text-muted" onclick="handleForgotPassword()">Quên mật khẩu?</a>
          </div>
          <button type="submit" class="btn btn-success w-100 fw-bold" id="btn-login">ĐĂNG NHẬP</button>
        </form>

        <form id="form-register" class="d-none">
          <input type="text" class="form-control mb-3" id="reg-name" placeholder="Họ tên đầy đủ" required>
          <input type="email" class="form-control mb-3" id="reg-email" placeholder="Email đăng nhập" required>
          <input type="text" class="form-control mb-3" id="reg-phone" placeholder="Số điện thoại" required>
          <input type="password" class="form-control mb-3" id="reg-pass" placeholder="Mật khẩu" required>
          <input type="password" class="form-control mb-4" id="reg-confirm-pass" placeholder="Nhập lại mật khẩu" required>
          <button type="submit" class="btn btn-primary w-100 fw-bold mb-3" id="btn-register">ĐĂNG KÝ</button>
          <div class="text-center">
            <a href="javascript:void(0)" class="text-decoration-none small text-success fw-bold" onclick="toggleAuth('LOGIN')">← Quay lại Đăng nhập</a>
          </div>
        </form>
        
        <div id="login-error" class="text-danger mt-3 small fw-bold"></div>
        <div class="mt-4 text-muted small">© 2026 Lộc Vũ Trung</div>
      </div>
    </div>

    <div id="main-app" class="d-none d-flex flex-column vh-100">
      <nav class="navbar navbar-dark bg-success shadow px-3" style="background: linear-gradient(135deg, #2E7D32 0%, #1B5E20 100%) !important;">
        <button class="btn text-white" id="sidebarToggle"><i class="fa-solid fa-bars"></i></button>
        <span class="navbar-brand fw-bold ms-2 fs-6">FSC SYSTEM</span>
        <div class="ms-auto text-white d-flex align-items-center">
          <span class="me-2 small d-none d-md-block" id="user-display-name">User</span>
          <button class="btn btn-sm btn-light text-success fw-bold rounded-pill px-3" onclick="logout()">Thoát</button>
        </div>
      </nav>

      <div class="d-flex flex-grow-1 overflow-hidden">
         <div id="sidebar-wrapper" class="bg-white border-end shadow-sm">
           <div class="sidebar-header p-3 text-center text-white fw-bold" style="background: #2E7D32;">MENU</div>
           <div class="accordion accordion-flush overflow-auto h-100" id="sidebarAccordion"></div>
        </div>

        <div id="page-content-wrapper" class="flex-grow-1 bg-light overflow-auto p-3 p-md-4">
          <div id="dashboard-view">
            <h5 class="fw-bold text-secondary mb-3"><i class="fa-solid fa-gauge-high me-2"></i>TỔNG QUAN</h5>
            <ul class="nav nav-pills mb-3" id="dashboardTabs"></ul>
            <div class="tab-content" id="dashboardTabContent"></div>
          </div>
          <div id="data-view" class="d-none">
            <div id="breadcrumb-container"></div>
            <div id="page-content-dynamic"></div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="dataModal" tabindex="-1"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header bg-success text-white"><h5 class="modal-title" id="modalTitle">Form</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button></div><div class="modal-body"><form id="dynamic-form" class="row g-3"></form></div><div class="modal-footer"><button type="button" class="btn btn-light" data-bs-dismiss="modal">Đóng</button><button type="button" class="btn btn-success" onclick="saveData()">Lưu</button></div></div></div></div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.4/js/dataTables.bootstrap5.min.js"></script>

    <?!= include('javascript'); ?>
  </body>
</html>
